<!DOCTYPE html>
<html lang="ja" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptStocks - プロンプト編集</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'craft-teal': '#1DB584',
                        'craft-teal-light': '#20D394',
                        'craft-teal-dark': '#1A9D75',
                        'craft-gray': '#F8F9FA'
                    },
                    fontFamily: {
                        'sf': ['-apple-system', 'BlinkMacSystemFont', 'SF Pro Display', 'Segoe UI', 'Roboto', 'sans-serif']
                    },
                    animation: {
                        'slide-in': 'slideIn 0.3s ease-out',
                        'fade-in': 'fadeIn 0.3s ease-out'
                    },
                    keyframes: {
                        slideIn: {
                            'from': { transform: 'translateY(-10px)', opacity: '0' },
                            'to': { transform: 'translateY(0)', opacity: '1' }
                        },
                        fadeIn: {
                            'from': { opacity: '0' },
                            'to': { opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .glass-morphism {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
    </style>
</head>
<body class="bg-craft-gray font-sf min-h-screen">
    <!-- Main Container -->
    <div class="max-w-sm mx-auto bg-white min-h-screen">
        
        <!-- Header -->
        <header class="flex items-center justify-between p-4 border-b border-gray-100">
            <button id="cancel-btn" class="flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
                <span class="text-sm font-medium">キャンセル</span>
            </button>
            
            <h1 class="text-lg font-semibold text-gray-800">プロンプト編集</h1>
            
            <button id="save-btn" class="bg-craft-teal text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-craft-teal-dark transition-colors">
                保存
            </button>
        </header>

        <!-- Content -->
        <div class="p-4 space-y-6">
            
            <!-- Title Field -->
            <div class="animate-slide-in">
                <label class="block text-sm font-medium text-gray-700 mb-2">タイトル</label>
                <input 
                    id="title-input"
                    type="text" 
                    placeholder="プロンプトのタイトルを入力..."
                    class="w-full p-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-craft-teal focus:border-transparent transition-all"
                    value="AIプロジェクトマネージャー"
                >
            </div>

            <!-- Category Selection -->
            <div class="animate-slide-in" style="animation-delay: 0.1s;">
                <label class="block text-sm font-medium text-gray-700 mb-2">カテゴリ</label>
                <select 
                    id="category-select"
                    class="w-full p-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-craft-teal focus:border-transparent transition-all"
                >
                    <option value="">カテゴリを選択...</option>
                    <option value="productivity" selected>作業効率</option>
                    <option value="writing">文章作成</option>
                    <option value="analysis">データ分析</option>
                    <option value="communication">コミュニケーション</option>
                    <option value="creative">クリエイティブ</option>
                </select>
            </div>

            <!-- Tags -->
            <div class="animate-slide-in" style="animation-delay: 0.2s;">
                <label class="block text-sm font-medium text-gray-700 mb-2">タグ</label>
                <div class="flex flex-wrap gap-2 mb-3" id="tags-container">
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-craft-teal/10 text-craft-teal border border-craft-teal/20">
                        プロジェクト管理
                        <button class="ml-1 hover:text-craft-teal-dark">×</button>
                    </span>
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700 border border-blue-200">
                        効率化
                        <button class="ml-1 hover:text-blue-800">×</button>
                    </span>
                </div>
                <input 
                    id="tag-input"
                    type="text" 
                    placeholder="新しいタグを入力してEnter..."
                    class="w-full p-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-craft-teal focus:border-transparent transition-all"
                >
            </div>

            <!-- Content Field -->
            <div class="animate-slide-in" style="animation-delay: 0.3s;">
                <div class="flex items-center justify-between mb-2">
                    <label class="block text-sm font-medium text-gray-700">プロンプト内容</label>
                    <span id="char-count" class="text-xs text-gray-500">284文字</span>
                </div>
                <textarea 
                    id="content-textarea"
                    rows="10"
                    placeholder="プロンプトの内容を入力..."
                    class="w-full p-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-craft-teal focus:border-transparent transition-all resize-none"
                >あなたは経験豊富なプロジェクトマネージャーです。以下の要件に基づいて、効率的なプロジェクト計画を作成してください。

要件：
- プロジェクト目標: [目標を記載]
- 期限: [期限を記載]
- チームメンバー: [人数と役割を記載]
- 予算: [予算範囲を記載]

以下の項目を含む詳細な計画を作成してください：
1. タスク分解 (WBS)
2. スケジュール
3. リスク分析
4. リソース配分</textarea>
            </div>

            <!-- Favorite Toggle -->
            <div class="animate-slide-in" style="animation-delay: 0.4s;">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-700">お気に入り</p>
                        <p class="text-xs text-gray-500">クイックアクセス用にマーク</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="favorite-toggle" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-craft-teal/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-craft-teal"></div>
                    </label>
                </div>
            </div>

        </div>

        <!-- Bottom Actions -->
        <div class="fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-sm bg-white border-t border-gray-100 p-4">
            <div class="flex space-x-3">
                <button id="delete-btn" class="flex-1 border border-red-200 text-red-600 py-3 rounded-xl text-sm font-medium hover:bg-red-50 transition-colors">
                    削除
                </button>
                <button id="duplicate-btn" class="flex-1 border border-gray-200 text-gray-700 py-3 rounded-xl text-sm font-medium hover:bg-gray-50 transition-colors">
                    複製
                </button>
                <button id="test-btn" class="flex-1 bg-craft-teal text-white py-3 rounded-xl text-sm font-medium hover:bg-craft-teal-dark transition-colors">
                    テスト実行
                </button>
            </div>
        </div>

        <!-- Spacer for fixed bottom -->
        <div class="h-20"></div>
    </div>

    <!-- Success Toast -->
    <div id="success-toast" class="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg opacity-0 pointer-events-none transition-opacity duration-300 z-50">
        <div class="flex items-center space-x-2">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
            </svg>
            <span>保存しました</span>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Character counter
            const textarea = document.getElementById('content-textarea');
            const charCount = document.getElementById('char-count');
            
            function updateCharCount() {
                const count = textarea.value.length;
                charCount.textContent = `${count}文字`;
            }
            
            textarea.addEventListener('input', updateCharCount);
            updateCharCount();

            // Tag management
            const tagInput = document.getElementById('tag-input');
            const tagsContainer = document.getElementById('tags-container');
            
            tagInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && this.value.trim()) {
                    e.preventDefault();
                    addTag(this.value.trim());
                    this.value = '';
                }
            });
            
            function addTag(tagText) {
                const tag = document.createElement('span');
                tag.className = 'inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 border border-gray-200';
                tag.innerHTML = `
                    ${tagText}
                    <button class="ml-1 hover:text-gray-800" onclick="removeTag(this)">×</button>
                `;
                tagsContainer.appendChild(tag);
            }
            
            window.removeTag = function(button) {
                button.parentElement.remove();
            };

            // Save button
            const saveBtn = document.getElementById('save-btn');
            const successToast = document.getElementById('success-toast');
            
            saveBtn.addEventListener('click', function() {
                // Simulate save
                this.disabled = true;
                this.textContent = '保存中...';
                
                setTimeout(() => {
                    this.textContent = '保存';
                    this.disabled = false;
                    
                    // Show success toast
                    successToast.style.opacity = '1';
                    successToast.style.pointerEvents = 'auto';
                    
                    setTimeout(() => {
                        successToast.style.opacity = '0';
                        successToast.style.pointerEvents = 'none';
                    }, 2000);
                }, 800);
            });

            // Cancel button
            document.getElementById('cancel-btn').addEventListener('click', function() {
                if (confirm('変更内容が失われますが、よろしいですか？')) {
                    // Navigate back
                    window.history.back();
                }
            });

            // Delete button
            document.getElementById('delete-btn').addEventListener('click', function() {
                if (confirm('このプロンプトを削除しますか？この操作は取り消せません。')) {
                    // Simulate delete
                    alert('プロンプトが削除されました');
                }
            });

            // Duplicate button
            document.getElementById('duplicate-btn').addEventListener('click', function() {
                // Simulate duplicate
                const titleInput = document.getElementById('title-input');
                titleInput.value = titleInput.value + ' (コピー)';
                
                // Show feedback
                this.textContent = '複製しました';
                this.style.backgroundColor = '#10B981';
                this.style.color = 'white';
                
                setTimeout(() => {
                    this.textContent = '複製';
                    this.style.backgroundColor = '';
                    this.style.color = '';
                }, 1500);
            });

            // Test run button
            document.getElementById('test-btn').addEventListener('click', function() {
                // Simulate test run
                this.disabled = true;
                this.innerHTML = '<div class="flex items-center justify-center"><div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div></div>';
                
                setTimeout(() => {
                    this.disabled = false;
                    this.textContent = 'テスト完了';
                    
                    setTimeout(() => {
                        this.textContent = 'テスト実行';
                    }, 1500);
                }, 2000);
            });
        });
    </script>
</body>
</html>