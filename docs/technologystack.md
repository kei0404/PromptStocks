# 技術スタック - Prompt Manager App

## コア技術
- TypeScript: ^5.0.0
- React Native: ^0.72.0
- Expo SDK: ^49.0.0
- iOS: 14.0+ (対象バージョン)

## モバイルフレームワーク
- **Expo**: React Nativeアプリケーション開発プラットフォーム
- **React Native**: クロスプラットフォームモバイルアプリケーション開発
- **Expo CLI**: プロジェクト管理とビルドツール
- **ExpoGo**: 開発・テスト段階での実行環境（基本機能検証用）

## ローカルストレージ
- **AsyncStorage**: 簡単なキー・バリューペアデータ用
- **SQLite**: 複雑なクエリと高パフォーマンス用
- **Expo SQLite**: Expo環境でのSQLiteサポート

## ナビゲーション・UI
- **React Navigation 6**: 画面管理とナビゲーション
- **React Native Elements**: UIコンポーネントライブラリ
- **React Native Vector Icons**: アイコンライブラリ

## デバイス機能統合
- **Expo Clipboard**: クリップボード操作
- **Expo FileSystem**: ローカルファイルシステムアクセス
- **AsyncStorage**: 永続的データストレージ

## iOSネイティブ開発
- **Swift**: iOSウィジェット拡張開発言語
- **SwiftUI**: ウィジェットUI実装フレームワーク
- **Xcode**: iOS開発環境
- **App Groups**: アプリとウィジェット間のデータ共有
- **WidgetKit**: iOSウィジェット開発フレームワーク
- **UserDefaults (App Groups)**: ウィジェット設定の共有ストレージ
- **Timeline API**: ウィジェット更新管理

## 開発ツール
- **Expo CLI**: プロジェクト管理とデバッグ
- **TypeScript**: 型安全性とコード品質
- **ESLint**: コード品質管理
- **Prettier**: コードフォーマット

## テストフレームワーク
- **Jest**: 単体テストフレームワーク
- **React Native Testing Library**: コンポーネントテスト
- **Detox**: エンドツーエンドテスト（iOS）

---

# アーキテクチャ制約

## オフライン最優先設計
- **ネットワーク依存なし**: 外部API呼び出しやクラウドサービスを完全に排除
- **ローカルストレージ専用**: すべてのデータはデバイス上のローカルストレージに保存
- **完全オフライン動作**: インターネット接続なしでの完全な機能提供

## データプライバシー・セキュリティ
- **ローカルデータのみ**: 外部サーバーへのデータ送信を厳格に禁止
- **App Groups**: iOS App Groups を使用したセキュアなアプリ・ウィジェット間データ共有
- **データ暗号化**: ローカルストレージでのセンシティブデータ保護

## パフォーマンス最適化
- **遅延読み込み**: 大量データの効率的な読み込み
- **ローカルキャッシュ**: 頻繁にアクセスされるデータのメモリキャッシュ
- **ストレージ最適化**: データ圧縮と効率的なローカルストレージ使用

## 実装規則
- **TypeScript厳格モード**: 型安全性の確保
- **ローカルストレージ最優先**: AsyncStorage → SQLite の段階的移行
- **ウィジェット分離**: メインアプリとウィジェットの独立した実装
- **エラーハンドリング**: オフライン環境での堅牢なエラー処理
- **段階的開発**: ExpoGo（基本機能） → ネイティブビルド（完全機能）の開発アプローチ

## ExpoGo開発制約

### ExpoGo対応機能
- **基本機能**: プロンプト管理、カテゴリ管理、テンプレート機能
- **ローカルストレージ**: AsyncStorage、Expo SQLiteによるデータ永続化
- **クリップボード統合**: Expo Clipboardによるコピー機能
- **ナビゲーション**: React Navigationによる画面遷移
- **オフライン動作**: 完全なオフライン機能

### ExpoGo制限事項
- **iOSウィジェット**: ネイティブビルドが必要（ExpoGoでは利用不可）
- **ウィジェット設定機能**: 高度なカスタマイズ機能はネイティブビルド必須
- **App Groups**: ウィジェット機能とデータ共有に必要なため、ネイティブビルド必須
- **画面ロック対応**: デバイスロック状態でのアクセス機能はネイティブビルドが必要
- **カスタムネイティブモジュール**: 一部機能でネイティブビルドが必要

### 開発戦略
- **第1段階**: ExpoGoでの基本機能開発・テスト
- **第2段階**: ネイティブビルドでのウィジェット機能実装
- **第3段階**: 高度なウィジェット設定・カスタマイズ機能の実装
- **代替手段**: ExpoGo制限機能に対するUI/UX代替案の提供

## ウィジェット設定技術要件

### 設定管理
- **ローカル設定ストレージ**: App Groups内のUserDefaultsを使用
- **設定同期**: メインアプリとウィジェット間のリアルタイム設定同期
- **設定バリデーション**: 設定値の整合性チェックと制約管理

### 高度なカスタマイズ
- **動的レイアウト**: ユーザー設定に基づくウィジェットレイアウト変更
- **コンテンツフィルタリング**: カテゴリ・優先度ベースのプロンプト表示
- **使用統計分析**: プロンプト使用頻度の追跡と自動最適化

### パフォーマンス要件
- **即座の反映**: 設定変更の即時ウィジェット更新
- **効率的な更新**: Timeline APIを使用した最適化されたウィジェット更新
- **バッテリー最適化**: 不要な更新の削減と効率的なデータ同期
